extends layout

block content
  h1(style='margin-top: 100px;') #{translation.CREATESTORY}

  if errors 
    br
    ul
      for error in errors
        li(style='font-size: 1.2em; font-weight: bold; color: red;')!= error.msg
  
  form(method='POST' action='' id='storyForm' name='storyForm')
    div.form-group.row
      div.col-sm-3
        label(for='book') #{translation.Book}:
        select#book.form-control(type='select', placeholder='Select book' name='book' )
          if !story
            option(value='') #{translation.storyonly}
          else
            if !story.book
              option(value='' selected='selected') #{translation.storyonly}
          for book in books
            if story
              if story.book
                option(value=book._id selected=(book._id.toString()==story.book._id.toString() ? 'selected' : false) ) #{book.title}
              else
                if bok
                  option(value=book._id selected=(book._id.toString()==bok.toString() ? 'selected' : false) ) #{book.title}
                else
                  option(value=book._id) #{book.title}
            else
              if bok
                option(value=book._id selected=(book._id.toString()==bok.toString() ? 'selected' : false) ) #{book.title}
              else
                option(value=book._id) #{book.title}
    div.form-group.row
      div.col-sm-3
        label(for='title') #{translation.Title}:
        input#title.form-control(type='text', placeholder='Name of story' name='title' required='true' value=(undefined===story ? '' : story.title) )
    
    div.form-group.row.boko
      div.col-sm-1
        label(for='order') #{translation.Order}:
        input#order.form-control(type='text', placeholder='Order of story' name='order' value=(undefined===story ? '' : story.order) )
    
    div.form-group.row.stro
      div.col-sm-2
        label(for='author') #{translation.Author}:
        input#author.form-control(type='text', placeholder='Author of story' name='author' value=(undefined===story ? '' : story.author) )

    div.form-group.row.stro
      div.col-sm-3
        label(for='reference') #{translation.Reference}:
        input#reference.form-control(type='text', placeholder='Reference of story' name='reference' value=(undefined===story ? '' : story.reference) )
    
    div.form-group.stro
      label #{translation.Genre}:
      div
        for genre in genres
          div(style='display: inline; padding-right:10px;')
            input.checkbox-input(type='checkbox', class='gne', name='genre', id=genre._id, value=genre._id, checked=genre.checked )
            label(for=genre._id) #{genre.name}
    
    div.form-group.row
      div.col-sm-6
        label(for='Content') #{translation.Content}:
        <div id="toolbar-container" class="ql-toolbar ql-snow">
            <span class="ql-formats">
                <select class="ql-font" style="width: 150px;">
                    <option selected="">Sans Serif</option>
                    <option value="LibreFranklin">Libre Franklin</option>
                    <option value="inconsolata">Inconsolata</option>
                    <option value="roboto">Roboto</option>
                    <option value="mirza">Mirza</option>
                    <option value="arial">Arial</option>
                    <option value="Oswald">Oswald</option>
                    <option value="ShadowsIntoLight">Shadows Into Light</option>
                    <option value="AbrilFatface">Abril Fatface</option>
                    <option value="Teko">Teko</option>
                    <option value="Cormorant">Cormorant</option>
                    <option value="AlfaSlabOne">Alfa Slab One</option>
                    <option value="NanumPenScript">나눔 손글씨 펜</option>
                    <option value="NanumBrushScript">나눔 손글씨 붓</option>
                    <option value="SongMyung">송명</option>
                    <option value="Gaegu">개구쟁이</option>
                    <option value="Jua">주아</option>
                    <option value="GamjaFlower">감자꽃 마을</option>
                    <option value="CuteFont">귀여운 폰트</option>
                    <option value="Stylish">스타일리시</option>
                    <option value="YeonSung">연성</option>
                    <option value="HiMelody">하이멜로디</option>
                    <option value="Sunflower">해바라기</option>
                    <option value="BlackHanSans">검은고딕</option>
                    <option value="GothicA1">고딕 A1</option>
                    <option value="NanumGothic">나눔고딕</option>
                    <option value="NanumMyeongjo">나눔명조</option>
                    <option value="PoorStory">서툰이야기</option>
                    <option value="BlackAndWhitePicture">흑백사진</option>
                </select>
            </span>
            <span class="ql-formats">
                <select class="ql-header"></select>
                <select class="ql-size">
                    <option value="1em">1em</option>
                    <option value="15em">1.5em</option>
                    <option value="2em">2em</option>
                    <option value="25em">2.5em</option>
                    <option value="3em">3em</option>
                    <option value="35em">3.5em</option>
                    <option value="4em">4em</option>
                    <option value="6em">6em</option>
                    <option value="8em">8em</option>
                    <option value="10em">10em</option>
                </select>
            </span>
            <span class="ql-formats">
                <button class="ql-bold"></button>
                <button class="ql-italic"></button>
                <button class="ql-underline"></button>
                <button class="ql-strike"></button>
            </span>
            <span class="ql-formats">
                <select class="ql-color">
                    <option selected></option>
                    <option value="red"></option>
                    <option value="orange"></option>
                    <option value="yellow"></option>
                    <option value="green"></option>
                    <option value="blue"></option>
                    <option value="purple"></option>
                </select>
                <select class="ql-background">
                    <option selected></option>
                    <option value="red"></option>
                    <option value="orange"></option>
                    <option value="yellow"></option>
                    <option value="green"></option>
                    <option value="blue"></option>
                    <option value="purple"></option>
                </select>
            </span>
            <span class="ql-formats">
                <button class="ql-script" value="sub"></button>
                <button class="ql-script" value="super"></button>
            </span>
            <span class="ql-formats">
                <button class="ql-blockquote"></button>
                <button class="ql-code-block"></button>
            </span>
            <span class="ql-formats">
                <button class="ql-list" value="ordered"></button>
                <button class="ql-list" value="bullet"></button>
                <select class="ql-align"></select>
            </span>
            <span class="ql-formats">
                <button class="ql-link"></button>
                <button class="ql-image"></button>
                <button class="ql-formula"></button>
            </span>
            <span class="ql-formats">
                <button class="ql-indent" value="-1"></button>
                <button class="ql-indent" value="+1"></button>
                <button class="ql-direction" value="rtl"></button>
                <button class="ql-clean"></button>
            </span>
        </div>        
        div#snow-container(spellcheck='false')
        input#content.form-control(type='hidden', name='content' value=(undefined===story ? '' : story.content) )

    div.form-group.row.stro
      div.col-sm-1
        label(for='open') #{translation.Open}:
        select#open.form-control(type='select', placeholder='Select Open' name='open')
          option(value='N' selected=(undefined===story ? 'selected' : story.open=='N' ? 'selected' : false) ) N
          option(value='Y' selected=(undefined===story ? false : story.open=='Y' ? 'selected' : false) ) Y
        <br><br>
    
    button.btn.btn-primary(type='submit', onclick='preview();return false;') #{translation.Preview}
    <br><br>
    button.btn.btn-primary(type='submit', onclick='storyPost();return false;') #{translation.Submit}
    <input type="hidden" id="hostname" name="hostname" value="#{hostname}" />

  div(style='margin-bottom: 50px;')

  <script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>
  <script src="/js/quill_setting.js"></script>
  <script src="/js/storyUpdate.js"></script>
